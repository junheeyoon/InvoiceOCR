{"ast":null,"code":"var _jsxFileName = \"D:\\\\WorkSpace\\\\workspace_RPA\\\\invoice\\\\src\\\\Coordinate.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Coordinate extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setC = () => {\n      const canvas = document.getElementById(\"canvas\");\n      let context = canvas.getContext(\"2d\");\n      const image = new Image(this.state.canvasHeight, this.state.canvasWidth); // Using optional size for image\n\n      image.src = this.state.imagePreviewUrl;\n      context.src = image.src;\n      context.drawImage(image, 0, 0, this.state.canvasWidth, this.state.canvasHeight);\n      this.setState({\n        context: context\n      });\n    };\n\n    this.getLocation = e => {\n      const context = this.state.context;\n      if (context == \"\") return;\n      const coorX = e.view.event.layerX;\n      const coorY = e.view.event.layerY;\n      const x = this.state.x;\n      const y = this.state.y;\n      context.globalAlpha = 0.2;\n\n      if (x == 0 && y == 0) {\n        this.setState({\n          x: coorX,\n          y: coorY\n        });\n        context.beginPath();\n        context.fillStyle = 'blue';\n        context.arc(coorX, coorY, 5, 0, 2 * Math.PI);\n        context.fill();\n        context.closePath();\n      } else {\n        this.setState({\n          x: 0,\n          y: 0\n        });\n        const text = x + \",\" + y + \" / \" + coorX + \",\" + coorY; // context.strokeRect(x,y,coorX-x,coorY-y);\n\n        context.beginPath();\n        context.fillStyle = 'blue';\n        context.arc(coorX, coorY, 5, 0, 2 * Math.PI);\n        context.fill();\n        context.fillStyle = \"red\";\n        context.fillRect(x, y, coorX - x, coorY - y);\n        context.globalAlpha = 1;\n        context.fillStyle = \"black\";\n        context.fillText(text, coorX, coorY);\n        context.closePath(); // DB에 넣을때는 화면과 size가 다르기때문에, 맞춰서 데이터를 준다.\n\n        console.log(x * this.state.canvasMultiple, y * this.state.canvasMultiple, coorX * this.state.canvasMultiple - x * this.state.canvasMultiple, coorY * this.state.canvasMultiple - y * this.state.canvasMultiple); // 아래부터는 DB에 데이터 전송이 필요.\n        // ...\n\n        document.getElementById(\"txtValue\").value = eval(x * this.state.canvasMultiple) + \",\" + eval(y * this.state.canvasMultiple) + \",\" + eval(coorX * this.state.canvasMultiple - x * this.state.canvasMultiple) + \",\" + eval(coorY * this.state.canvasMultiple - y * this.state.canvasMultiple);\n      }\n    };\n\n    this.insertCoordinateData = e => {\n      if (document.getElementById(\"txtLabel\").value && document.getElementById(\"txtValue\").value) {\n        const txtTable = document.getElementById(\"txtTable\").value;\n        const txtLabel = document.getElementById(\"txtLabel\").value;\n        const txtValue = document.getElementById(\"txtValue\").value.replace(\",\", \"|\");\n        let formData = new FormData();\n        formData.append('methodName', 'UpdateCoordinate');\n        formData.append('table', txtTable);\n        formData.append('label', txtLabel);\n        formData.append('value', txtValue);\n        fetch(\"http://\" + this.state.IP + \"/RPA/Coordinate/setCoordinate\", {\n          method: 'POST',\n          body: formData\n        }).then(res => res.json()).then(this.callGetListData).catch(error => {\n          console.error(error);\n        });\n        document.getElementById(\"imageFile\").src = \"\";\n        document.getElementById(\"txtPanel\").innerHTML = \"\";\n      } else {\n        alert('Label & Value is a required');\n        return;\n      }\n    };\n\n    this.state = {\n      dataList: null,\n      IP: '127.0.0.1:8728',\n      tableName: '',\n      x: 0,\n      y: 0,\n      context: '',\n      canvasWidth: 800,\n      canvasHeight: 1200,\n      canvasMultiple: 1,\n      file: '',\n      imagePreviewUrl: ''\n    };\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  render() {\n    let {\n      imagePreviewUrl\n    } = this.state;\n    let $imagePreview = null;\n\n    if (imagePreviewUrl) {\n      $imagePreview = /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imagePreviewUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 28\n      }, this);\n    } else {\n      $imagePreview = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"previewText\",\n        children: \"Please select an Image for Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 28\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \" Coordinate \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          this.props.history.goBack();\n        },\n        children: \" back \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        border: \"1\",\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colSpan: \"2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"previewComponent\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"fileInput\",\n              type: \"file\",\n              accept: \"image/png, image/jpeg\",\n              onChange: e => this._handleImageChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: this.setC,\n              children: \"convert\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            id: \"canvas\",\n            height: \"1200\",\n            width: \"800\",\n            onClick: this.getLocation,\n            children: \"This browser doesn't support canvas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          valign: \"top\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Data Table : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"txtTable\",\n            value: \"awb_coordinate\",\n            size: \"20\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 50\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 127\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 132\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"txtTable\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"invoice_type\",\n              children: \"Invoice Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"invoice_coordinate\",\n              children: \"Invoice Coordinate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Data Label : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"txtLabel\",\n            size: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 50\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 95\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 100\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Data Value : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"txtValue\",\n            size: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 50\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 95\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 100\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: this.insertCoordinateData,\n            children: \"Insert Coordinate Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Coordinate;","map":{"version":3,"sources":["D:/WorkSpace/workspace_RPA/invoice/src/Coordinate.js"],"names":["React","Component","Coordinate","constructor","props","setC","canvas","document","getElementById","context","getContext","image","Image","state","canvasHeight","canvasWidth","src","imagePreviewUrl","drawImage","setState","getLocation","e","coorX","view","event","layerX","coorY","layerY","x","y","globalAlpha","beginPath","fillStyle","arc","Math","PI","fill","closePath","text","fillRect","fillText","console","log","canvasMultiple","value","eval","insertCoordinateData","txtTable","txtLabel","txtValue","replace","formData","FormData","append","fetch","IP","method","body","then","res","json","callGetListData","catch","error","innerHTML","alert","dataList","tableName","file","_handleImageChange","preventDefault","reader","FileReader","target","files","onloadend","result","readAsDataURL","render","$imagePreview","history","goBack"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\r\n\r\nclass Coordinate extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dataList:null\r\n            , IP:'127.0.0.1:8728'\r\n            , tableName : ''\r\n\r\n            , x : 0\r\n            , y : 0\r\n            , context : ''\r\n\r\n            , canvasWidth : 800\r\n            , canvasHeight : 1200\r\n            , canvasMultiple : 1\r\n\r\n            , file : ''\r\n            , imagePreviewUrl : ''\r\n        }\r\n\r\n    }\r\n\r\n    _handleImageChange(e) {\r\n        e.preventDefault();\r\n\r\n        let reader = new FileReader();\r\n        let file = e.target.files[0];\r\n\r\n        reader.onloadend = () => {\r\n        this.setState({\r\n            file: file,\r\n            imagePreviewUrl: reader.result\r\n        });\r\n        }\r\n\r\n        reader.readAsDataURL(file)\r\n        \r\n        \r\n    }\r\n    setC = () =>{\r\n        const canvas = document.getElementById(\"canvas\");\r\n        let context = canvas.getContext(\"2d\");\r\n        const image = new Image(this.state.canvasHeight, this.state.canvasWidth); // Using optional size for image\r\n\r\n        image.src = this.state.imagePreviewUrl\r\n        \r\n        context.src = image.src\r\n\r\n        context.drawImage( image , 0, 0,this.state.canvasWidth, this.state.canvasHeight);\r\n        this.setState({context:context})\r\n\r\n    }\r\n\r\n    getLocation = (e) => {\r\n        const context = this.state.context\r\n        if(context == \"\") return\r\n\r\n        const coorX = e.view.event.layerX\r\n        const coorY = e.view.event.layerY\r\n        const x = this.state.x\r\n        const y = this.state.y\r\n        context.globalAlpha = 0.2;\r\n        \r\n        if (x == 0 && y == 0) {\r\n            this.setState({x:coorX, y:coorY})\r\n            context.beginPath();\r\n            context.fillStyle = 'blue';\r\n            context.arc(coorX, coorY, 5, 0, 2 * Math.PI);\r\n            context.fill();\r\n            context.closePath();\r\n        }else{\r\n            this.setState({x:0,y:0})\r\n            const text = x+\",\"+y +\" / \" +(coorX)+\",\"+(coorY)\r\n            // context.strokeRect(x,y,coorX-x,coorY-y);\r\n            context.beginPath();\r\n            context.fillStyle = 'blue';\r\n            context.arc(coorX, coorY, 5, 0, 2 * Math.PI);\r\n            context.fill();\r\n            context.fillStyle = \"red\";\r\n            context.fillRect(x,y,coorX-x,coorY-y);\r\n\r\n            context.globalAlpha = 1;\r\n            context.fillStyle = \"black\";\r\n            context.fillText(text, coorX,coorY);\r\n            context.closePath();\r\n\r\n            // DB에 넣을때는 화면과 size가 다르기때문에, 맞춰서 데이터를 준다.\r\n            console.log(x * this.state.canvasMultiple\r\n                , y * this.state.canvasMultiple\r\n                , coorX * this.state.canvasMultiple-x * this.state.canvasMultiple\r\n                , coorY * this.state.canvasMultiple-y * this.state.canvasMultiple);\r\n            // 아래부터는 DB에 데이터 전송이 필요.\r\n            // ...\r\n\r\n            document.getElementById(\"txtValue\").value = (\r\n                eval(x * this.state.canvasMultiple)\r\n                +\",\"+ eval(y * this.state.canvasMultiple)\r\n                +\",\"+ eval(coorX * this.state.canvasMultiple-x * this.state.canvasMultiple)\r\n                +\",\"+ eval(coorY * this.state.canvasMultiple-y * this.state.canvasMultiple)\r\n            );\r\n        }\r\n    };\r\n    insertCoordinateData = (e) => {\r\n        if (document.getElementById(\"txtLabel\").value && document.getElementById(\"txtValue\").value ) {\r\n            const txtTable = document.getElementById(\"txtTable\").value\r\n            const txtLabel = document.getElementById(\"txtLabel\").value\r\n            const txtValue = document.getElementById(\"txtValue\").value.replace(\",\",\"|\")\r\n\r\n            let formData = new FormData();\r\n            formData.append('methodName', 'UpdateCoordinate');\r\n            formData.append('table', txtTable);\r\n            formData.append('label', txtLabel);\r\n            formData.append('value', txtValue);\r\n    \r\n            fetch(\"http://\"+this.state.IP+\"/RPA/Coordinate/setCoordinate\", {\r\n                method: 'POST',\r\n                body: formData\r\n            })\r\n            .then(res => res.json())\r\n            .then(\r\n                this.callGetListData\r\n                \r\n            )\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n            document.getElementById(\"imageFile\").src= \"\";\r\n            document.getElementById(\"txtPanel\").innerHTML = \"\";\r\n        }else{\r\n            alert('Label & Value is a required');return;\r\n        }\r\n        \r\n\r\n    }\r\n    render(){\r\n\r\n        let {imagePreviewUrl} = this.state;\r\n        let $imagePreview = null;\r\n        if (imagePreviewUrl) {\r\n          $imagePreview = (<img src={imagePreviewUrl} />);\r\n        } else {\r\n          $imagePreview = (<div className=\"previewText\">Please select an Image for Preview</div>);\r\n        }\r\n        return (\r\n            <div>\r\n                <h3> Coordinate </h3>\r\n                <button onClick={ () => {this.props.history.goBack()} }> back </button>\r\n                <p/>\r\n                \r\n                \r\n                <tr border=\"1\">\r\n                    <td colSpan=\"2\">\r\n                    <div className=\"previewComponent\">\r\n                        {/* <form onSubmit={(e)=>this._handleSubmit(e)}> */}\r\n                        <input className=\"fileInput\" \r\n                            type=\"file\" \r\n                            accept=\"image/png, image/jpeg\"\r\n                            onChange={(e)=>this._handleImageChange(e)} />\r\n                        {/* <button className=\"submitButton\" \r\n                            type=\"submit\" \r\n                            onClick={(e)=>this._handleSubmit(e)}>Upload Image</button> */}\r\n                        {/* </form> */}\r\n                        {/* <div className=\"imgPreview\">\r\n                            {$imagePreview}\r\n                        </div> */}\r\n\r\n                        <button onClick={this.setC}>convert</button>\r\n                    </div>\r\n                    <p/>\r\n                    </td>\r\n                </tr> \r\n                <tr>\r\n                    <td>\r\n                    <p/>\r\n                    <canvas id=\"canvas\" height=\"1200\" width=\"800\" onClick={this.getLocation}>This browser doesn't support canvas</canvas>\r\n                    </td>\r\n\r\n                    <td valign=\"top\" > \r\n                    <label >Data Table : </label><input type='text' id='txtTable' value ='awb_coordinate' size='20' disabled/><br/><br/>\r\n                        <select id='txtTable' >\r\n                            <option value=\"invoice_type\">Invoice Type</option>\r\n                            <option value=\"invoice_coordinate\">Invoice Coordinate</option>\r\n                        </select>\r\n                    <label >Data Label : </label><input type='text' id='txtLabel' size='20' /><br/><br/>\r\n                    <label >Data Value : </label><input type='text' id='txtValue' size='20' /><br/><br/>\r\n                    <button type='button' onClick={this.insertCoordinateData}>Insert Coordinate Data</button>\r\n                    </td>\r\n                </tr>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Coordinate;"]},"metadata":{},"sourceType":"module"}